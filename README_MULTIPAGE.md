# 🌱 得希表型采集系统 - 多页面版本

## 📋 项目结构

本系统已重构为多页面应用，将不同功能模块分离到独立的页面中。

### 📁 文件说明

#### 核心文件
- **common.css** - 共享样式文件，包含导航栏、页面头部、按钮等通用样式
- **common.js** - 共享JavaScript代码，包含Supabase配置、语言翻译、工具函数等

#### 页面文件
- **index.html / home.html** - 主页/导航页，展示四个功能模块的入口卡片
- **calendar.html** - 📅 采集日历页面，显示月历视图，标记有数据的日期
- **collection.html** - 📊 数据采集页面，记录各项表型指标
- **statistics.html** - 📈 统计数量页面，显示采集统计和累积指标
- **trends.html** - 📉 趋势分析页面，可视化展示指标的时间趋势

#### 备份文件
- **index_old.html** - 原始单页面应用的备份

## 🚀 使用方法

### 本地运行
```bash
# 在项目目录下启动HTTP服务器
python -m http.server

# 或使用其他HTTP服务器
# 然后访问 http://localhost:8000
```

### 页面导航
系统提供了统一的导航栏，可以在各个页面之间自由切换：
- 🏠 首页 - 功能模块入口
- 📅 采集日历 - 查看采集历史
- 📊 数据采集 - 记录表型数据
- 📈 统计数量 - 查看统计信息
- 📉 趋势分析 - 分析数据趋势

## ✨ 主要功能

### 1. 采集日历 (calendar.html)
- 月历视图显示
- 标记有数据的日期
- 显示当前周数
- 支持月份切换

### 2. 数据采集 (collection.html)
- 滑块输入各项指标
- 复选框控制激活状态
- 实时显示采集进度
- CSV导出功能
- 云端同步功能

### 3. 统计数量 (statistics.html)
- 累计记录数统计
- 本月记录数统计
- 累积统计指标（总坐果数、总采收数等）

### 4. 趋势分析 (trends.html)
- Chart.js图表展示
- 指标选择器
- 月份切换
- 支持累积指标计算

## 🌐 多语言支持

系统支持中文和英文两种语言：
- 点击右上角的语言切换按钮
- 语言偏好保存在localStorage中
- 所有页面自动同步语言设置

## 🔐 用户认证

- 使用Supabase进行用户认证
- 支持邮箱密码登录/注册
- 登录后可同步数据到云端
- 数据按用户隔离存储

## 📊 数据存储

### 本地存储
- 使用localStorage保存语言偏好

### 云端存储 (Supabase)
- plant_data表存储表型数据
- 按用户ID和日期组织数据
- 支持数据的增删改查

## 🎨 设计特点

- 现代化的渐变配色方案
- 响应式设计，支持移动端
- 流畅的动画过渡效果
- 直观的用户界面
- 统一的视觉风格

## 🔧 技术栈

- **前端框架**: 原生HTML/CSS/JavaScript
- **图表库**: Chart.js
- **后端服务**: Supabase
- **样式**: CSS Grid + Flexbox
- **图标**: Unicode Emoji

## 📝 开发说明

### 添加新页面
1. 创建新的HTML文件
2. 引入common.css和common.js
3. 添加导航栏（复制其他页面的导航栏代码）
4. 调用`setActiveNav('pageName')`设置当前页面
5. 在其他页面的导航栏中添加链接

### 修改样式
- 通用样式修改common.css
- 页面特定样式在各自的`<style>`标签中

### 添加功能
- 共享功能添加到common.js
- 页面特定功能在各自的`<script>`标签中

## 🐛 故障排除

### 页面无法加载
- 确保HTTP服务器正在运行
- 检查浏览器控制台是否有错误

### 数据无法同步
- 检查网络连接
- 确认已登录
- 查看Supabase配置是否正确

### 图表不显示
- 确认Chart.js CDN可访问
- 检查是否有数据
- 查看浏览器控制台错误信息

## 📄 许可证

本项目为内部使用项目。

## 👥 贡献者

得希团队

---

**版本**: 2.0 (多页面版本)  
**最后更新**: 2025-12-11
