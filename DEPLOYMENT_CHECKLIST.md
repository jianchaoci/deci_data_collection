# ✅ Vercel 部署检查清单

## 部署前检查

### 1. 代码准备
- [ ] 所有 HTML 文件存在且无错误
- [ ] CSS 样式正常
- [ ] JavaScript 无语法错误
- [ ] 所有资源文件路径正确

### 2. Supabase 配置
- [ ] 已在 Supabase 创建项目
- [ ] 已运行 `supabase_schema.sql` 创建表
- [ ] 已获取 Supabase URL
- [ ] 已获取 Supabase Anon Key
- [ ] 已在 `common.js` 中配置正确的 URL 和 Key

### 3. 数据库检查
- [ ] `phenotype_records` 表已创建
- [ ] `weekly_statistics` 表已创建
- [ ] RLS 策略已启用
- [ ] 索引已创建
- [ ] 触发器已创建

### 4. 部署文件
- [ ] `vercel.json` 已创建
- [ ] `.vercelignore` 已创建
- [ ] `README.md` 已更新

---

## 部署步骤

### 方式一：Vercel CLI（推荐）

#### 步骤 1: 安装 CLI
```bash
npm install -g vercel
```
- [ ] Vercel CLI 已安装

#### 步骤 2: 登录
```bash
vercel login
```
- [ ] 已登录 Vercel 账户

#### 步骤 3: 部署
```bash
# 开发环境
vercel

# 生产环境
vercel --prod
```
- [ ] 部署成功
- [ ] 获得部署 URL

### 方式二：Git 集成

#### 步骤 1: Git 初始化
```bash
git init
git add .
git commit -m "Initial commit"
```
- [ ] Git 仓库已初始化
- [ ] 代码已提交

#### 步骤 2: 推送到远程
```bash
git remote add origin <your-repo-url>
git push -u origin main
```
- [ ] 代码已推送到 GitHub/GitLab

#### 步骤 3: Vercel 导入
- [ ] 在 Vercel 中导入项目
- [ ] 配置正确
- [ ] 部署成功

---

## 部署后配置

### 1. Supabase URL 配置
在 Supabase Dashboard → Authentication → URL Configuration：

- [ ] 添加 Site URL: `https://your-project.vercel.app`
- [ ] 添加 Redirect URLs: `https://your-project.vercel.app/**`

### 2. 测试功能

#### 基础功能
- [ ] 首页正常加载
- [ ] 导航链接正常工作
- [ ] 多语言切换正常

#### 认证功能
- [ ] 登录页面正常显示
- [ ] 可以正常登录
- [ ] 登录后正确跳转
- [ ] 用户信息正确显示
- [ ] 退出登录正常

#### 数据采集
- [ ] 采集页面正常加载
- [ ] 样本选择正常
- [ ] 指标输入正常
- [ ] 数据提交成功
- [ ] 进度统计正确

#### 统计分析
- [ ] 统计页面正常加载
- [ ] 配置参数可以保存
- [ ] 统计指标计算正确
- [ ] 数据显示正确

#### 趋势分析
- [ ] 趋势页面正常加载
- [ ] 指标选择正常
- [ ] 图表正常显示
- [ ] 数据准确无误

#### 日历功能
- [ ] 日历页面正常加载
- [ ] 日期显示正确
- [ ] 采集记录正确标记

### 3. 性能检查
- [ ] 页面加载速度 < 3秒
- [ ] 图表渲染流畅
- [ ] 数据库查询快速
- [ ] 无明显卡顿

### 4. 兼容性检查
- [ ] Chrome 浏览器正常
- [ ] Firefox 浏览器正常
- [ ] Safari 浏览器正常
- [ ] Edge 浏览器正常
- [ ] 移动端浏览器正常

### 5. 安全检查
- [ ] HTTPS 已启用
- [ ] RLS 策略正常工作
- [ ] 用户只能访问自己的数据
- [ ] 未授权访问被拒绝

---

## 用户邀请

### 在 Supabase 中邀请用户
1. 进入 Authentication → Users
2. 点击 "Invite User"
3. 输入用户邮箱
4. 用户收到邀请邮件

- [ ] 已邀请测试用户
- [ ] 用户收到邀请邮件
- [ ] 用户可以成功登录
- [ ] 用户可以正常使用系统

---

## 监控设置

### Vercel Analytics（可选）
- [ ] 已启用 Vercel Analytics
- [ ] 可以查看访问统计
- [ ] 可以查看性能指标

### 错误监控
- [ ] 检查 Vercel 部署日志
- [ ] 检查浏览器控制台错误
- [ ] 检查 Supabase 日志

---

## 文档更新

- [ ] README.md 已更新
- [ ] 部署 URL 已记录
- [ ] 用户手册已准备
- [ ] 技术文档已完善

---

## 备份策略

### 代码备份
- [ ] 代码已推送到 Git 仓库
- [ ] 创建了版本标签
- [ ] 有定期备份计划

### 数据备份
- [ ] Supabase 自动备份已启用
- [ ] 有手动备份计划
- [ ] 备份恢复流程已测试

---

## 性能优化

### 前端优化
- [ ] 静态资源已压缩
- [ ] 图片已优化
- [ ] 代码已精简

### 数据库优化
- [ ] 索引已创建
- [ ] 查询已优化
- [ ] RLS 策略已优化

### CDN 配置
- [ ] Vercel CDN 自动启用
- [ ] 缓存策略已配置
- [ ] 响应时间 < 200ms

---

## 常见问题解决

### 页面空白
- [ ] 检查控制台错误
- [ ] 检查 Supabase 配置
- [ ] 检查文件路径

### 登录失败
- [ ] 检查 Supabase URL 配置
- [ ] 检查用户是否被邀请
- [ ] 检查 CORS 设置

### 数据无法保存
- [ ] 检查 RLS 策略
- [ ] 检查用户权限
- [ ] 检查数据库连接

### 图表不显示
- [ ] 检查 Chart.js CDN
- [ ] 检查数据格式
- [ ] 检查控制台错误

---

## 最终确认

### 部署完成
- [ ] 所有功能正常
- [ ] 所有测试通过
- [ ] 文档已完善
- [ ] 用户已培训

### 上线准备
- [ ] 已通知用户
- [ ] 已准备技术支持
- [ ] 已制定应急预案

---

## 部署信息记录

### 项目信息
- **项目名称**: _________________
- **Vercel URL**: _________________
- **部署日期**: _________________
- **部署人员**: _________________

### Supabase 信息
- **项目 ID**: _________________
- **数据库 URL**: _________________
- **创建日期**: _________________

### 域名信息（如有）
- **自定义域名**: _________________
- **DNS 配置**: _________________
- **SSL 证书**: _________________

---

## 签字确认

- **开发人员**: _________________ 日期: _________
- **测试人员**: _________________ 日期: _________
- **项目负责人**: _________________ 日期: _________

---

**部署完成后，请保存此清单作为记录！** ✅

